import{_ as te,a as ne,b as oe,c as re,d as se}from"../modules/unplugin-icons-CKVGVXge.js";import{t as y,y as v,A,d as M,a1 as le,a2 as ie,a3 as ae,D as I,C as ce,a4 as de,n as ue,o as u,c as g,i as x,h as b,a5 as G,a6 as Q,b as h,j as me,e as s,l as f,F as R,x as z,g as D,Z as _e,p as W,a as X,M as fe,_ as pe,J as ve,a7 as xe,a8 as ge,k as F}from"../modules/vue-CN7GKaRw.js";import{k as he,b as O,l as ke,r as ye,C as be,u as Se,c as U,j as Ce,m as we,d as Ne,n as Fe,g as ze}from"../index-BHcupksN.js";import{r as De,u as Ie,S as Me,N as Oe,Q as Pe,G as Te,a as He,I as Ee}from"./SlidesShow-DcnmCEqe.js";import{s as je,d as Le,i as Re,p as Ve,b as Be,c as qe,e as Ke,S as Ae}from"./bottom-DdeCXgcx.js";import{N as J}from"./NoteDisplay-CfS3dTzJ.js";import Ue from"./DrawingControls-CNyzEgEc.js";import{u as Ge}from"./DrawingPreview-CKfczs6-.js";import"../modules/shiki-BdW7Uaf0.js";import"./context-D1kdqP9b.js";function Z(r){var t;return{info:y((t=he(r))==null?void 0:t.meta.slide),update:async()=>{}}}const L={};function Qe(r){function t(o){return L[o]??(L[o]=Z(o))}return{info:v(()=>t(A(r)).info.value),update:async(o,e)=>{const a=t(e??A(r)),l=await a.update(o);return l&&(a.info.value=l),l}}}const We=M({__name:"NoteEditable",props:{no:{type:Number,required:!0},class:{default:""},editing:{default:!1},style:{default:()=>({})},placeholder:{default:"No notes for this slide"},clicksContext:{type:Object},autoHeight:{default:!1}},emits:["update:editing","markerDblclick","markerClick"],setup(r,{expose:t,emit:o}){t();const e=r,a=o,l=le(e,"editing",a,{passive:!0}),{info:i,update:n}=Qe(ie(e,"no")),c=y("");let m;const{ignoreUpdates:p}=ae(c,_=>{if(!l.value)return;const P=e.no;clearTimeout(m),m=setTimeout(()=>{n({note:_},P)},500)});I(()=>{var _;return(_=i.value)==null?void 0:_.note},(_="")=>{l.value||(clearTimeout(m),p(()=>{c.value=_}))},{immediate:!0,flush:"sync"});const d=y(),C=y();ce(()=>{var _;l.value&&((_=d.value)==null||_.focus())}),de(d,()=>{l.value=!1});function S(){!e.autoHeight||!d.value||!l.value||d.value.scrollHeight>d.value.clientHeight&&(d.value.style.height=`${d.value.scrollHeight}px`)}I([c,l],()=>{ue(()=>{S()})},{flush:"post",immediate:!0});const w={props:e,emit:a,editing:l,info:i,update:n,note:c,get timer(){return m},set timer(_){m=_},ignoreUpdates:p,inputEl:d,inputHeight:C,calculateEditorHeight:S,NoteDisplay:J};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),Xe=["placeholder"];function Je(r,t,o,e,a,l){var i;return e.editing?G((u(),h("textarea",{key:1,ref:"inputEl","onUpdate:modelValue":t[2]||(t[2]=n=>e.note=n),class:x(["prose resize-none overflow-auto outline-none bg-transparent block border-primary border-2",e.props.class]),style:b([{"line-height":"1.75"},[e.props.style,e.inputHeight!=null?{height:`${e.inputHeight}px`}:{}]]),placeholder:o.placeholder,onKeydown:t[3]||(t[3]=me(n=>e.editing=!1,["esc"]))},null,46,Xe)),[[Q,e.note]]):(u(),g(e.NoteDisplay,{key:0,class:x(["border-transparent border-2",[e.props.class,e.note?"":"opacity-25 italic select-none"]]),style:b(e.props.style),note:e.note||o.placeholder,"note-html":(i=e.info)==null?void 0:i.noteHTML,"clicks-context":o.clicksContext,"auto-scroll":!o.autoHeight,onMarkerClick:t[0]||(t[0]=(n,c)=>e.emit("markerClick",n,c)),onMarkerDblclick:t[1]||(t[1]=(n,c)=>e.emit("markerDblclick",n,c))},null,8,["class","style","note","note-html","clicks-context","auto-scroll"]))}const Ze=O(We,[["render",Je],["__file","/home/runner/work/slidev_template/slidev_template/node_modules/@slidev/client/internals/NoteEditable.vue"]]),Ye=M({__name:"NoteStatic",props:{no:{type:Number,required:!0},class:{type:String,required:!1},clicksContext:{type:Object,required:!1}},setup(r,{expose:t}){t();const o=r,{info:e}=Z(o.no),a={props:o,info:e,NoteDisplay:J};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}});function $e(r,t,o,e,a,l){var i,n;return u(),g(e.NoteDisplay,{class:x(e.props.class),note:(i=e.info)==null?void 0:i.note,"note-html":(n=e.info)==null?void 0:n.noteHTML,"clicks-context":o.clicksContext},null,8,["class","note","note-html","clicks-context"])}const et=O(Ye,[["render",$e],["__file","/home/runner/work/slidev_template/slidev_template/node_modules/@slidev/client/internals/NoteStatic.vue"]]),tt=M({__name:"ClicksSlider",props:{clicksContext:{type:Object,required:!0}},setup(r,{expose:t}){t();const o=r,e=v(()=>o.clicksContext.total),a=v(()=>ke(0,o.clicksContext.clicksStart,e.value)),l=v(()=>e.value-a.value+1),i=v({get(){return o.clicksContext.current>e.value?-1:o.clicksContext.current},set(p){o.clicksContext.current=p}}),n=v(()=>ye(a.value,e.value+1));function c(){(i.value<0||i.value>e.value)&&(i.value=0)}const m={props:o,total:e,start:a,length:l,current:i,clicksRange:n,onMousedown:c,get CLICKS_MAX(){return be}};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),Y=r=>(W("data-v-46333647"),r=r(),X(),r),nt=["title"],ot={class:"flex gap-0.5 items-center min-w-16 font-mono mr1"},rt=Y(()=>s("div",{"flex-auto":""},null,-1)),st={"text-primary":""},lt=Y(()=>s("span",{op25:""},"/",-1)),it={op50:""},at=["min","max"];function ct(r,t,o,e,a,l){const i=te;return u(),h("div",{class:x(["flex gap-1 items-center select-none",e.length?"":"op50"]),title:`Clicks in this slide: ${e.length}`},[s("div",ot,[f(i,{"text-sm":"",op50:""}),rt,e.current>=0&&e.current!==e.CLICKS_MAX?(u(),h(R,{key:0},[s("span",st,z(e.current),1),lt],64)):D("v-if",!0),s("span",it,z(e.total),1)]),s("div",{relative:"","flex-auto":"",h5:"","font-mono":"",flex:"~",onDblclick:t[2]||(t[2]=n=>e.current=o.clicksContext.total)},[(u(!0),h(R,null,_e(e.clicksRange,n=>(u(),h("div",{key:n,border:"y main","of-hidden":"",relative:"",class:x([n===0?"rounded-l border-l":"",n===e.total?"rounded-r border-r":""]),style:b({width:e.length>0?`${1/e.length*100}%`:"100%"})},[s("div",{absolute:"","inset-0":"",class:x(n<=e.current?"bg-primary op15":"")},null,2),s("div",{class:x([+n==+e.current?"text-primary font-bold op100 border-primary":"op30 border-main",n===0?"rounded-l":"",n===e.total?"rounded-r":"border-r-2"]),"w-full":"","h-full":"","text-xs":"",flex:"","items-center":"","justify-center":"","z-1":""},z(n),3)],6))),128)),G(s("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>e.current=n),class:"range",absolute:"","inset-0":"",type:"range",min:e.start,max:e.total,step:1,"z-10":"",op0:"",style:b({"--thumb-width":`${1/(e.length+1)*100}%`}),onMousedown:e.onMousedown,onFocus:t[1]||(t[1]=n=>{var c;return(c=n.currentTarget)==null?void 0:c.blur()})},null,44,at),[[Q,e.current]])],32)],10,nt)}const dt=O(tt,[["render",ct],["__scopeId","data-v-46333647"],["__file","/home/runner/work/slidev_template/slidev_template/node_modules/@slidev/client/internals/ClicksSlider.vue"]]),ut=M({__name:"presenter",setup(r,{expose:t}){t();const o=y();De(),Ie(o);const{clicksContext:e,currentSlideNo:a,currentSlideRoute:l,hasNext:i,nextRoute:n,slides:c,queryClicks:m,getPrimaryClicks:p,total:d}=Se(),{isDrawing:C}=Ge(),S=U.titleTemplate.replace("%s",U.title||"Slidev");Ce({title:`Presenter - ${S}`});const w=y(!1),{timer:_,resetTimer:P}=we(),B=v(()=>c.value.map(H=>Ne(H))),N=v(()=>e.value.current<e.value.total?[l.value,e.value.current+1]:i.value?[n.value,0]:null),T=v(()=>N.value&&B.value[N.value[0].no-1]);I([l,m],()=>{T.value&&(T.value.current=N.value[1])},{immediate:!0});const $=fe();pe(()=>{const H=o.value.querySelector("#slide-content"),K=ve(xe()),ee=ge();I(()=>{if(!ee.value||C.value||!je.value)return;const k=H.getBoundingClientRect(),E=(K.x-k.left)/k.width*100,j=(K.y-k.top)/k.height*100;if(!(E<0||E>100||j<0||j>100))return{x:E,y:j}},k=>{Fe.cursor=k})});const q={main:o,clicksContext:e,currentSlideNo:a,currentSlideRoute:l,hasNext:i,nextRoute:n,slides:c,queryClicks:m,getPrimaryClicks:p,total:d,isDrawing:C,slideTitle:S,notesEditing:w,timer:_,resetTimer:P,clicksCtxMap:B,nextFrame:N,nextFrameClicksCtx:T,SideEditor:$,get decreasePresenterFontSize(){return Le},get increasePresenterFontSize(){return Re},get presenterLayout(){return Ve},get presenterNotesFontSize(){return Be},get showEditor(){return qe},get showOverview(){return Ke},get getSlideClass(){return ze},SlideWrapper:Ae,SlideContainer:Me,NavControls:Oe,QuickOverview:Pe,NoteEditable:Ze,NoteStatic:et,Goto:Te,SlidesShow:He,DrawingControls:Ue,IconButton:Ee,ClicksSlider:dt};return Object.defineProperty(q,"__isScriptSetup",{enumerable:!1,value:!0}),q}}),V=r=>(W("data-v-70568663"),r=r(),X(),r),mt={class:"bg-main h-full slidev-presenter"},_t={ref:"main",class:"relative grid-section main flex flex-col"},ft=V(()=>s("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Current ",-1)),pt={class:"relative grid-section next flex flex-col p-2 lg:p-4"},vt=V(()=>s("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Next ",-1)),xt={key:1,class:"grid-section note grid grid-rows-[1fr_min-content] overflow-hidden"},gt={class:"border-t border-main py-1 px-2 text-sm"},ht={class:"grid-section bottom flex"},kt=V(()=>s("div",{"flex-auto":""},null,-1)),yt={class:"text-2xl pl-2 pr-6 my-auto tabular-nums"},bt={class:"progress-bar"};function St(r,t,o,e,a,l){var p;const i=ne,n=oe,c=re,m=se;return u(),h(R,null,[s("div",mt,[s("div",{class:x(["grid-container",`layout${e.presenterLayout}`])},[s("div",_t,[f(e.SlideContainer,{key:"main",class:"h-full w-full p-2 lg:p-4 flex-auto"},{default:F(()=>[f(e.SlidesShow,{"render-context":"presenter"})]),_:1}),(u(),g(e.ClicksSlider,{key:(p=e.currentSlideRoute)==null?void 0:p.no,"clicks-context":e.getPrimaryClicks(e.currentSlideRoute),class:"w-full pb2 px4 flex-none"},null,8,["clicks-context"])),ft],512),s("div",pt,[e.nextFrame&&e.nextFrameClicksCtx?(u(),g(e.SlideContainer,{key:"next",class:"h-full w-full"},{default:F(()=>[(u(),g(e.SlideWrapper,{is:e.nextFrame[0].component,key:e.nextFrame[0].no,"clicks-context":e.nextFrameClicksCtx,class:x(e.getSlideClass(e.nextFrame[0])),route:e.nextFrame[0],"render-context":"previewNext"},null,8,["is","clicks-context","class","route"]))]),_:1})):D("v-if",!0),vt]),D(" Notes "),(u(),h("div",xt,[(u(),g(e.NoteStatic,{key:`static-${e.currentSlideNo}`,no:e.currentSlideNo,class:"w-full max-w-full h-full overflow-auto p-2 lg:p-4",style:b({fontSize:`${e.presenterNotesFontSize}em`}),"clicks-context":e.clicksContext},null,8,["no","style","clicks-context"])),s("div",gt,[f(e.IconButton,{title:"Increase font size",onClick:e.increasePresenterFontSize},{default:F(()=>[f(i)]),_:1},8,["onClick"]),f(e.IconButton,{title:"Decrease font size",onClick:e.decreasePresenterFontSize},{default:F(()=>[f(n)]),_:1},8,["onClick"]),D("v-if",!0)])])),s("div",ht,[f(e.NavControls,{persist:!0}),kt,s("div",{class:"timer-btn my-auto relative w-22px h-22px cursor-pointer text-lg",opacity:"50 hover:100",onClick:t[2]||(t[2]=(...d)=>e.resetTimer&&e.resetTimer(...d))},[f(c,{class:"absolute"}),f(m,{class:"absolute opacity-0"})]),s("div",yt,z(e.timer),1)]),(u(),g(e.DrawingControls,{key:2}))],2),s("div",bt,[s("div",{class:"progress h-3px bg-primary transition-all",style:b({width:`${(e.currentSlideNo-1)/(e.total-1)*100}%`})},null,4)])]),f(e.Goto),f(e.QuickOverview,{modelValue:e.showOverview,"onUpdate:modelValue":t[3]||(t[3]=d=>e.showOverview=d)},null,8,["modelValue"])],64)}const Tt=O(ut,[["render",St],["__scopeId","data-v-70568663"],["__file","/home/runner/work/slidev_template/slidev_template/node_modules/@slidev/client/pages/presenter.vue"]]);export{Tt as default};
